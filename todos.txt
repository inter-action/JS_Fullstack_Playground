 knex migrate:make library --env test --knexfile  build/server/data/db/knexfile.js
 knex migrate:latest library --env test --knexfile  build/server/data/db/knexfile.js
 knex migrate:latest --env test --knexfile  build/server/data/db/knexfile.js
 knex migrate:latest --env dev --knexfile  build/server/data/db/knexfile.js


# rename scripts

    #!/bin/bash
    for file in $(find test -type f); do
        case $file in
        *spec.ts) # has a extension
            mv $file ${file/spec/test};
        esac
    done



# Road maps

* npm or yarn?

* how to debug with docker

docker-compose run api npm install cors

add docker proxy

# blogs:
http://mherman.org/



# links:
aws:
  https://medium.com/trisfera/deploying-an-express-application-to-aws-lambda-the-easy-way-fa5fbef190ba#.vmuhnsx7r
  
node:
  [19 things I learnt reading the NodeJS docs](https://hackernoon.com/19-things-i-learnt-reading-the-nodejs-docs-8a2dcc7f307f#.ibos50cqi)
  [Node.js at Scale - Understanding the Node.js Event Loop](https://blog.risingstack.com/node-js-at-scale-understanding-node-js-event-loop/)
  https://blog.risingstack.com/nodejs-at-scale-npm-publish-tutorial/
  https://blog.risingstack.com/finding-a-memory-leak-in-node-js/

todos:

  done:
    es6 symbol - https://www.keithcirkel.co.uk/metaprogramming-in-es6-symbols/
    es6 reflect - https://www.keithcirkel.co.uk/metaprogramming-in-es6-part-2-reflect/
    es7 decorator - https://medium.com/google-developers/exploring-es7-decorators-76ecb65fb841#.m9olqtn41
    add logger
    process.on(`uncaughtException`, console.error);
    /node_modules/@types/koa-router/index.d.ts
      package type declaration

    https://www.smashingmagazine.com/2016/08/getting-started-koa-2-async-functions/
      import bodyParser from 'koa-bodyparser';
      import cors from 'kcors';
    read nodejs stream doc
    replace bookshelf config the dotenv
    update npm package

    bookshelf:
      add bookshelf orm
      validate model on save

    exception handling:
      unit test should ignore `UnprocessableEntityError` result by ctx.assert
      handle nodejs exception, no leak to user 
      integrate koa-route with https://github.com/hapijs/boom

    create a custom Validation error, eg. Inside user model
    change test framework mocha to ava
    merge get_mysql_env, ENV_UTILS 
    rename spec to test

    knex:
      update knex doc
      unify knex workflow


  pending:
    clean todo in src code.
    https://www.tutorialspoint.com/makefile/makefile_dependencies.htm
    
    json api versioning
    how this `res.body[0].explicit.should.not.be.ok;` is writed in src code
    chaiHttp isnt able to test raw text response?
    http://caolan.github.io/async/
    redis cluster with docker
    https with nodejs: 
      https://medium.com/@nileshsingh/everything-about-creating-an-https-server-using-node-js-2fc5c48a8d4e#.9oz0lax2n
    integrate logrotate, docker with pino logger 
      http://www.nearform.com/nodecrunch/sematext-guest-post-pino-fastest-node-js-logger-production/?utm_source=nodeweekly&utm_medium=email
    
    
    add authenticate middleware
    add dependence explaination

    how properly handle request validation
      writer a high order function that return a params validation middleware

    bookshelf:
      bookshelf eager load & lazy load
      filter sensitive out data access api
      find better way to type 充血模型
      
    refactor tests run on sqlite3
    unit-test, treat db test specially, with loose timeout
    
    add status field on user
      0: none activiated
      1: activated
      10-15: warning stage
      20: locked

    add mysql eager test on run


    auth with passport:
      what session is for
      koa2 with passport
      https://github.com/rkusa/koa-passport


  /Users/interaction/workspace/nodejs/koa2-api-boilerplate/src/modules/index.js
    api doc
    

    $2a$10$Me6ee0U0pwsA9QrdmanvjOi1EurxcWltCsOaesoxt4HWFUWKuUhjW
    fuckyouguys


    所有 可以await 的api 以一种统一的方式命名掉
    jwt 到底是干啥的 我记得是用作session的替代的，如果如此， 要留session 吗，还是两者并存
    mongodb 感觉比mysql好用多了，有没有做一版mongo的？

    update doc related to knex migration

    

    
    